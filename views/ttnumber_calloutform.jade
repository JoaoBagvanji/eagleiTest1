extends layout
block content
	form#ttnumberform(style="margin-bottom:0px; height:550px" name="ttnumbercalloutform")
		h3(class="fs-title selmecAzul" style="margin-top:20px; margin-bottom:54px; border-bottom: 5px solid #a1c861 !important;") <span data-i18n="demo.ttnumber_form.criartarefa"></span>
		.row#recolherdados(style="margin-top:-40px; margin-bottom:0px" detalhesclientessite="#{SiteCliente}" detalhessiteinfo="#{SiteInfo}" detalhesjobcards="#{DadosJobcards}" detalhesjobcardscallout="#{DadosJobcardCallout}" detalhesclientes="#{DadosClientes}" detalhesCausa="#{DadosCausa}" detalhesdepartamento="#{DadosDepartamento}")
			console.log(DadosClientes)
			.col.s12.m6(style="margin-top:6px")
				label <span data-i18n="demo.manutencao_form.departamento"></span>
				select.browser-default(name="departamento", id="departamento")
					option(value="" disabled selected) Escolha a opção
					-if(DataU.funcao=="Manager" || DataU.funcao=="Commercial")
						-for(let i=0; i<AdMagen[0].departamento.length; i++)
							-if(DataU.departamento_id==AdMagen[0].departamento[i]._id)
								option(value="#{AdMagen[0].departamento[i].nome}" , data-cont="#{AdMagen[0].departamento[i]._id}") #{AdMagen[0].departamento[i].nome}
					-else
						-for(let i=0; i<AdMagen[0].departamento.length; i++)
							-if((AdMagen[0].departamento[i].nome=="Telco") || (AdMagen[0].departamento[i].nome=="Centro de Dados") || (AdMagen[0].departamento[i].nome=="Energia") || (AdMagen[0].departamento[i].nome=="Climatização e Electricidade"))
								option(value="#{AdMagen[0].departamento[i].nome}" , data-cont="#{AdMagen[0].departamento[i]._id}") #{AdMagen[0].departamento[i].nome}
			.input-field.col.s12.m6(style="margin-top:22px")
				label(for="jobcard_ttnumber") <span data-i18n="demo.ttnumber_form.ttnumber"></span>
				input( autocomplete="off", type="number", style="font-family:;color:#12375c" ,id="jobcard_ttnumber" ,name="jobcard_ttnumber")
		.row#formulariotelco.hide
			.row(style="margin-bottom:0px") 
				.col.s12.m6(style="margin-top:5px")
					label(for="jobcard_clienteid") <span data-i18n="demo.ttnumber_form.cliente"></span>
					select.browser-default(name="jobcard_clienteid", id="jobcard_clienteid" detalhessiteinfo="#{SiteInfo}")
						option(value="" disabled selected) Escolha a opção
						-for(var i=0; i<ClientesTelco.length; i++)
							option(value="#{ClientesTelco[i]._id}") #{ClientesTelco[i].cliente_nome}
				.col.s2.hide-on-med-and-up(style="margin-top:22px")
					img(class="hide-on-med-and-up" src="/img/okk.png")
				.input-field.col.s10.m6(style="margin-top:22px")
					select(name="jobcard_call", id="jobcard_call" multiple)
						option#terceiro(value="" disabled selected) Escolha a opção
						-for(let i=0; i<DadosCausa.length; i++)	
							option(value="#{DadosCausa[i]}") #{DadosCausa[i]}
					label Causa
			.row(style="margin-bottom:0px")
				.col.s10.m6.jobcard_siteidselect(style="margin-top:3px")
					label(for="jobcard_siteidselectttnumber") Site
					select.browser-default(name="jobcard_siteidselectttnumber", id="jobcard_siteidselectttnumber")
						option(value="" disabled selected) Escolha a opção
				.col.s2.hide-on-med-and-up.jobcard_siteidselect.hide(style="margin-top:22px")
					img(class="hide-on-med-and-up" src="/img/okk.png")
				.input-field.col.s12.m6.jobcard_siteidinput.hide(style="margin-top:19px")
					label(for="jobcard_siteidinputttnumber") Site
					input( autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="jobcard_siteidinputttnumber", name="jobcard_siteidinputttnumber")
				.col.s12.m6(style="margin-top:2px")
					label(for="jobcard_tecnicoid") <span data-i18n="demo.ttnumber_form.tecniconome"></span>
					select.browser-default(name="jobcard_tecnicoid", id="jobcard_tecnicoid")
						option(value="" disabled selected) Escolha a opção
						-for(var i=0; i<Usuarios.length; i++)
							option(value="#{Usuarios[i]._id}") #{Usuarios[i].nome}
			.row(style="margin-bottom:0px")
				.input-field.col.s10.m6.jobcard_jobinfoselect.hide(style="margin-top:22px")
					select(name="jobcard_jobinfoselect", id="jobcard_jobinfoselect" multiple)
						option(value="" disabled selected) Escolha a opção
					label <span data-i18n="demo.manutencao_form.jobinfo"></span>
				.input-field.col.s12.m6.jobcard_jobinfoinput(style="margin-top:22px")
					label(for="jobcard_jobinfoinput") <span data-i18n="demo.manutencao_form.jobinfo"></span>
					input( autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="jobcard_jobinfoinput" ,name="jobcard_jobinfoinput")
				.input-field.col.s12.m6#outro1.hide(style="margin-top:22px")
					label(for="outro") Outro
					input( autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="outro" ,name="outro")
				.col.s12.m6(style="margin-top:6px")
					label(for="jobcard_priority") <span data-i18n="demo.ttnumber_form.prioridade"></span>
					select.browser-default(name="jobcard_priority", id="jobcard_priority")
						option(value="" disabled selected) Escolha a opção
						option(value="Alta") Alta
						option(value="Media") Média
						option(value="Baixa") Baixa
			.row#jobcard_reportnmcoperator(style="margin-bottom:0px")
				.input-field.col.s12.m6(style="margin-top:7px")
					label(for="jobcard_reportnmcoperator") <span data-i18n="demo.manutencao_form.reportnmcoperator"></span>
					input( autocomplete="on", type="text", style="font-family:;color:#12375c" ,id="jobcard_reportnmcoperator" ,name="jobcard_reportnmcoperator")
				.input-field.col.s12.m6(style="margin-top:6px")
					label(for="jobcard_datareporte") <span data-i18n="demo.manutencao_form.datareporte"></span>
					input( autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="jobcard_datareporte" ,name="jobcard_datareporte", value = "#{DataRelatada}", readonly)
			.row(style="margin-bottom:0px")
				.input-field.col.s12.m6(style="margin-top:6px")
					label(for="jobcard_horareporte") <span data-i18n="demo.manutencao_form.horareporte"></span>
					input( autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="jobcard_horareporte" ,name="jobcard_horareporte", value = "#{HoraRelatada}", readonly)
			button(type="button", id="createnewttnumber", class="btn modal-action waves-effect waves-green btn-flat" style="margin-top: 15px !important; font-size:12px") <span data-i18n="demo.ttnumber_form.create"></span>
		.row#formulariohvac.hide
			fieldset.no-border.legend-border
				legend.selmecAzul.bold <span data-i18n="demo.ttnumber_form.criartarefa"></span>
				.row
					.col.s12.m6
						label(for="jobcard_clienteid") <span data-i18n="demo.ttnumber_form.cliente"></span>
						select.browser-default(name="cliente_hvac", id="cliente_hvac")
							option(value="" disabled selected) Escolha a opção
							-for(var i=0; i<Clientes.length; i++)
								option(value="#{Clientes[i].nome_cliente}", data-cont="#{Clientes[i]._id}") #{Clientes[i].nome_cliente}
							option(value="Novo") Novo
					.col.s12.m6
						label(for="filial") Filial
						select.browser-default(name="filial", id="filial")
							option(value="" disabled selected) Escolha a opção
					.col.s12.m6
						label(for="regiao") <span data-i18n="demo.utilizador_form.regiao"></span>
						select.browser-default(name="regiao", id="regiao", style="font-family:" disabled)
							option(value="" disabled selected) Escolha a opção
							-for(let i=0; i<AdMagen[0].regiao.length; i++)
								option(value="#{AdMagen[0].regiao[i].nome}", data-cont="#{AdMagen[0].regiao[i]._id}" ) #{AdMagen[0].regiao[i].nome}
					.col.s12.m6
						label <span data-i18n="demo.utilizador_form.provincia"></span>
						select.browser-default.browser-default(name="provincia_trabalho", id="provincia_trabalho", style="font-family:")
							option(value="" disabled selected) Escolha a opção
							-for(let i=0; i<AdMagen[0].provincia.length; i++)
								option(value="#{AdMagen[0].provincia[i].nome}", data-cont="#{AdMagen[0].provincia[i]._id}") #{AdMagen[0].provincia[i].nome}
					.input-field.col.s12.m6
						label(for="local") Local
						input(autocomplete="off", type="text", style="font-family:;color:#12375c" makhapa="#{Clientes1}" placeholder='',readonly, id="local", name="local")
					.col.s12.m6
						label(for="pessoa_contacto") Pessoa de Contacto
						select.browser-default(name="pessoa_contacto", id="pessoa_contacto")
							option(value="" disabled selected) Escolha a opção
			fieldset.no-border.legend-border.avacseccao
				legend.selmecAzul.bold <span data-i18n="demo.ttnumber_form.equipe"></span>
				.row
					.col.s12.m6
						label(for="tecnico") Equipe Tecnica
						select.browser-default(name="tecnico", id="tecnico", style="font-family:")
							option(value="" disabled selected) Escolha a opção
							//- -for(let i=0; i<HvacUsers.length; i++)
							//- 	option(value="#{HvacUsers[i].nome}", data-cont="#{HvacUsers[i]._id}") #{HvacUsers[i].nome}
					
							-if(DataU.nivel_acesso=="admin" || DataU.funcao=="Call Center" || DataU.funcao=="Back Office")
								-for(let i=0; i<tecnicos.length; i++)	
									option(value="#{tecnicos[i].nome}", data-cont="#{tecnicos[i]._id}") #{tecnicos[i].nome}
							-else
								-for(let i=0; i<HvacUsers.length; i++)
									option(value="#{HvacUsers[i].nome}", data-cont="#{HvacUsers[i]._id}") #{HvacUsers[i].nome}

					.col.s12.m6
						label Matricula da viatura
						select.browser-default.browser-default(name="viatura", id="viatura", style="font-family:")
							option(value="" disabled selected) Escolha a opção
							//- -for(let i=0; i<Viaturas.length; i++)
							//- 	option(value="#{Viaturas[i].matricula}") #{Viaturas[i].matricula}
								
							-if(DataU.nivel_acesso=="admin" || DataU.funcao=="Call Center" || DataU.funcao=="Back Office")
								-for(let i=0; i<viacturasAdmin.length; i++)	
									option(value="#{viacturasAdmin[i].matricula}") #{viacturasAdmin[i].matricula}
							-else
								-for(let i=0; i<Viaturas.length; i++)
									option(value="#{Viaturas[i].matricula}") #{Viaturas[i].matricula}
					.col.s12.m6(style="margin-top:2px")
						label(for="jobcard_priority1") <span data-i18n="demo.ttnumber_form.prioridade"></span>
						select.browser-default(name="jobcard_priority1", id="jobcard_priority1")
							option(value="" disabled selected) Escolha a opção
							option(value="Alta") Alta
							option(value="Media") Média
							option(value="Baixa") Baixa
					.input-field.col.s12.m6
						label(for="data") Data prevista
						input.datepicker(autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="data", name="data")  
					.input-field.col.s12.m6
						label(for="razao") Motivo
						input(autocomplete="off", type="text", style="font-family:;color:#12375c" ,id="razao", name="razao")
			fieldset.no-border.legend-border
				legend.selmecAzul.bold <span data-i18n="demo.ttnumber_form.assistent"></span>
			.row.multi-field-wrapper.col.s12
					.multi-fields.col.s12
						.multi-field.col.s12.m6
							.col.s10
								label(for="pessoas_permitidas[]") Assistentes
								select.browser-default.pessoas_permitidas(name="pessoas_permitidas[]",  style="font-family:")
									option(value="" disabled selected selmecVerde) choose Option
									-if(DataU.nivel_acesso=="admin" || DataU.funcao=="Call Center" || DataU.funcao=="Back Office")
										-for(let i=0; i<tecnicos.length; i++)	
											option(value="#{tecnicos[i].nome}", data-cont="#{tecnicos[i]._id}") #{tecnicos[i].nome}
									-else
										-for(let i=0; i<HvacUsers.length; i++)
											option(value="#{HvacUsers[i].nome}", data-cont="#{HvacUsers[i]._id}") #{HvacUsers[i].nome}
					a(class="btn-floating btn-large waves-effect waves-light add-field12 right") +
			.row
				.col.s12
					table.responsive-table.bordered.striped(style="height:auto !important")
						thead
							tr.selmecAzul
								th <span data-i18n="demo.Armazem_form.tecnicos_locados"></span>
								th
						tbody(id="myTable_tecnicos_permitidos" style="height:auto !important")
				//- fieldset.no-border
				//- 		.row.buttons-container
				//- 			.col.s12.center
				//- 				butoon#criacaoandepto(type="button", class="btn waves-efect waves-light activarAzul") Criar
		
			button(type="button", id="criacaoandepto", class="btn modal-action waves-effect waves-green btn-flat" style="margin-top: 15px !important; font-size:12px") <span data-i18n="demo.ttnumber_form.create"></span>
		
	block js
		script(type="text/javascript" src="/js/jquery.mask.js")
		script.

			setTimeout(function(){document.getElementById("geradorId").className="activarAzul"}, 50);
			setTimeout(function(){
				
			if(window.innerWidth<780){
			document.getElementById("mySidebar").style.width = "0";
			document.getElementById("main").style.marginLeft= "0";
			document.getElementById("main").style.width="100%";
			document.getElementById("main").style.marginBottom="0";
			document.getElementByClassName("capitalize").style.class="pequeno";
			}
			}, 50);

